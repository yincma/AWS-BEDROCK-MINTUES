# CLI 工具

AWS Bedrock Minutes 命令行工具集。

## init_defaults.py

初始化默认数据到S3存储桶。

### 功能

- 检查并创建默认会议记录模板
- 避免重复创建(如果已存在则跳过)
- 友好的命令行输出
- 详细的错误提示

### 使用方法

#### 方式1: 作为模块运行(推荐)

```bash
# 激活虚拟环境
source venv/bin/activate

# 运行CLI工具
python -m src.cli.init_defaults

# 显示帮助
python -m src.cli.init_defaults --help
```

#### 方式2: 直接运行脚本

```bash
# 激活虚拟环境
source venv/bin/activate

# 直接运行
python src/cli/init_defaults.py

# 显示帮助
python src/cli/init_defaults.py -h
```

### 环境变量

需要配置以下环境变量(或在.env文件中设置):

```bash
AWS_REGION=us-east-1                    # AWS区域
AWS_ACCESS_KEY_ID=your_access_key       # AWS访问密钥ID
AWS_SECRET_ACCESS_KEY=your_secret_key   # AWS密钥
S3_BUCKET_NAME=meeting-minutes-dev      # S3存储桶名称
```

### 输出示例

#### 首次运行(创建模板)

```
============================================================
AWS Bedrock Minutes - 初始化默认数据
============================================================

✓ 已创建默认模板: 标准会议记录模板
  ID: default
  章节数: 2

============================================================
✓ 初始化完成
============================================================
```

#### 再次运行(模板已存在)

```
============================================================
AWS Bedrock Minutes - 初始化默认数据
============================================================

✓ 默认模板已存在
  ID: default
  名称: 标准会议记录模板
  创建时间: 2025-10-01 00:00:00

============================================================
✓ 初始化完成
============================================================
```

#### 错误情况

```
============================================================
✗ 错误: Could not connect to S3
============================================================

请检查:
  1. AWS凭证是否正确配置
  2. S3存储桶是否存在且有访问权限
  3. 网络连接是否正常

详细错误信息:
[错误堆栈信息]
```

### 错误处理

CLI工具会捕获并处理以下错误:

1. **AWS凭证错误**: 检查AWS_ACCESS_KEY_ID和AWS_SECRET_ACCESS_KEY
2. **S3权限错误**: 确保有s3:GetObject和s3:PutObject权限
3. **网络连接错误**: 检查网络连接和AWS区域设置
4. **配置错误**: 检查.env文件或环境变量

### 注意事项

1. 必须先激活虚拟环境
2. 需要正确配置AWS凭证
3. S3存储桶必须存在
4. 需要对S3存储桶有读写权限

### 退出代码

- `0`: 成功
- `1`: 错误
- `130`: 用户中断(Ctrl+C)
